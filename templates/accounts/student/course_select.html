{% extends "dash_base.html" %}

{% load static %}

{% load crispy_forms_tags %}

{% load simpletags %}

{% block title %}
    {{title}}
{% endblock title %}

{% block sidebar %}
    {% include '../../partials/student/_sidebar.html' %}
{% endblock sidebar %}


{% block maincontent %}
    <div class="container m-2 p-2">
        <div class="row">
            <div class="col-md-6">
                <h3 class="text-center">{{active_semester.semester_full_name}}</h3>
                <p class="text-center lead">
                    Please Select Courses For {{active_semester.semester_full_name}}
                </p>
                <hr>
                <form novalidate action="{% url 'course:student_course_select' %}" method="POST">
                    {% csrf_token %}
                    {{course_select_form.courses|as_crispy_field}}

                    {{course_select_form.semester|as_crispy_field}}

                    <input type="submit" value="Submit" class="btn btn-info btn-block btn-sm">
                </form>
            </div>
            <div class="col-md-6">
                <table class="table table-hover table-inverse">
                    <thead>
                        <tr>
                            <th>Course Name</th>
                            <th>Course Teachers</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>

                        {% for course  in my_courses.courses.all|active_semester %}
                        <tr>
                            <td>{{course.course_name}}</td>
                            {% if course.course_teacher.all.count > 0 %}
                            {% for course in course.course_teacher.all %}
                                <td>

                                        {% for teacher in course.teachers.all %}
                                        {{teacher}},
                                        {% endfor %}
                               </td>

                            {% endfor %}
                            {% else %}
                                <td>
                                    No Teacher Selected
                                </td>
                            {% endif %}
                            <td>
                                {% if  my_courses.active %}
                                   <i class="fa fa-check text-success"></i>
                                {% else %}
                                    <i class="fa fa-times text-danger"></i>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

            </div>
        </div>
    </div>
{% endblock maincontent %}
